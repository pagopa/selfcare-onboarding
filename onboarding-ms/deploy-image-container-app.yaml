properties:
  managedEnvironmentId: /subscriptions/$SUBSCRIPTION_ID$/resourceGroups/$RESOURCE_GROUP$/providers/Microsoft.App/managedEnvironments/$CONTAINER_APP_ENV$
  configuration:
    secrets:
      - name: jwt-public-key
        keyVaultUrl: https://selc-d-kv.vault.azure.net/secrets/jwt-public-key
        identity: system
    ingress:
      external: true
      allowInsecure: false
      targetPort: 80
  template:
    containers:
      - image: ghcr.io/pagopa/selfcare-onboarding-ms:latest
        name: selfcare-onboarding-ms
        env:
          - name: JWT_TOKEN_PUBLIC_KEY
            secretRef: jwt-token-public-key

    scale:
      minReplicas: 1
      maxReplicas: 5